"use strict";import utils from"../utils.js";function parsePropPath(name){return utils.matchAll(/\w+|\[(\w*)]/g,name).map(match=>{return match[0]==="[]"?"":match[1]||match[0]})}function arrayToObject(arr){const obj={};const keys=Object.keys(arr);let i;const len=keys.length;let key;for(i=0;i<len;i++){key=keys[i];obj[key]=arr[key]}return obj}function formDataToJSON(formData){function buildPath(path,value,target,index){let name=path[index++];if(name==="__proto__")return true;const isNumericKey=Number.isFinite(+name);const isLast=index>=path.length;name=!name&&utils.isArray(target)?target.length:name;if(isLast){if(utils.hasOwnProp(target,name)){target[name]=[target[name],value]}else{target[name]=value}return!isNumericKey}if(!target[name]||!utils.isObject(target[name])){target[name]=[]}const result=buildPath(path,value,target[name],index);if(result&&utils.isArray(target[name])){target[name]=arrayToObject(target[name])}return!isNumericKey}if(utils.isFormData(formData)&&utils.isFunction(formData.entries)){const obj={};utils.forEachEntry(formData,(name,value)=>{buildPath(parsePropPath(name),value,obj,0)});return obj}return null}export default formDataToJSON;